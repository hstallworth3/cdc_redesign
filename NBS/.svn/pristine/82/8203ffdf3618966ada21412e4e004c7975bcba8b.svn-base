<%@ include file="/jsp/tags.jsp" %><%@ include file="/jsp/resources.jsp" %><script type="text/javascript">if (typeof window.event != 'undefined')  document.onkeydown = function()    {		var t=event.srcElement.type;		if(t == '' || t == 'undefined' || t == 'button') {			return;		}		var kc=event.keyCode;		//alert(kc + '  ' +  t);		if(t == 'text' && kc == 13) {			searchPatient();		}		    }    	function  searchPatient() {		   			var allEnabledSearchIpElts = $j("#qsearch").find(':input:enabled');			var atleastOne = false;			var validDob = true;			//alert(allEnabledSearchIpElts.length);	        for (var i = 0; i < allEnabledSearchIpElts.length; i++) {	            if ($j(allEnabledSearchIpElts[i]).attr("type") != 'radio' && $j(allEnabledSearchIpElts[i]).attr("type") != 'hidden' && $j(allEnabledSearchIpElts[i]).attr("type") != 'button' && jQuery.trim($j(allEnabledSearchIpElts[i]).attr("value")) !="" ) {						atleastOne = true;						//alert($j(allEnabledSearchIpElts[i]).attr("type") + $j(allEnabledSearchIpElts[i]).attr("value"));						if($j(allEnabledSearchIpElts[i]).attr("id") == 'DEM115') {							if (!isDate( $j(allEnabledSearchIpElts[i]).attr("value") ) ) {								alert('DOB must be in the format of mm/dd/yyyy. Please correct the data and try again.');								$j("#DEM115").focus();								return false;							}						}	            }	        }		        if(!atleastOne) {	        	alert('Please enter at least one item to search on and try again.');	        	$j("#DEM102").focus();	        		        	return false;	        }	        if($j("#ESR100").attr("value")!="" && $j("#ESR101").attr("value")=="") {	        	alert('Please enter Event ID and try again.');	        	$j("#ESR101").focus();	        	return false;	        	        }        for (var i = 0; i < allEnabledSearchIpElts.length; i++) {		     if($j(allEnabledSearchIpElts[i]).attr("type") == 'button')		        $j(allEnabledSearchIpElts[i]).attr("disabled","disabled");        }	       		document.patientSearchForm.action ="/nbs/PatientSearch.do?method=patientSearchSubmit";		document.patientSearchForm.submit();	}	function toggleSearch(rad) {		var type = rad.id;   		//alert(type);		if(type == 'pat') {			clearEvent();			$j("#patientSearchByEvent").hide();							$j("#patientSearchByDetails").show();					}		if(type == 'evt') {			clearPatient();			$j("#patientSearchByDetails").hide();			$j("#patientSearchByEvent").show();					}			}		function clearPatient() {        var allEnabledSearchIpElts = $j("#patientSearchByDetails").find(':input:enabled');        for (var i = 0; i < allEnabledSearchIpElts.length; i++) {            if ($j(allEnabledSearchIpElts[i]).attr("type") != 'button') {                $j(allEnabledSearchIpElts[i]).val("");            }        }		}	function clearEvent() {        var allEnabledSearchIpElts = $j("#patientSearchByEvent").find(':input:enabled');        for (var i = 0; i < allEnabledSearchIpElts.length; i++) {            if ($j(allEnabledSearchIpElts[i]).attr("type") != 'button') {                $j(allEnabledSearchIpElts[i]).val("");            }        }			showHideEventId();	}		function showHideEventId() {		$j('#ESR101').val('');		if($j('#ESR100').attr('value') == "")			$j('#ESR101TR').hide();			else {			$j('#ESR101TR').show();				$j('#ESR101').focus();				}		}	</script><html:form action="/PatientSearch.do"><div id="qsearch" >    <p>        <b>Search by:</b>        &nbsp;<input type="radio" id="pat" onclick="toggleSearch(this)" name="patientSearch" checked /> Demographics        &nbsp;<input type="radio" id="evt" onclick="toggleSearch(this)" name="patientSearch" /> Event    </p>        <p style="margin-top:0.5em;">            <div id="patientSearchByDetails">        		<html:hidden property="patientSearchVO.lastNameOperator"/>        		<html:hidden property="patientSearchVO.firstNameOperator"/>						<html:hidden property="patientSearchVO.birthTimeOperator"/>                <table class="formTable" style="width:90%; margin:auto;">                    <tr>                        <td class="fieldName"> Last Name: </td>                         <td> <html:text  property="patientSearchVO.lastName" styleId="DEM102" title="Patient's Last Name Contains"/> </td>                    </tr>                    <tr>                                                                            <td class="fieldName"> First Name: </td>                         <td> <html:text  property="patientSearchVO.firstName" styleId="DEM104" title="Patient's First Name Contains"/> </td>                    </tr>                    <tr>                            <td class="fieldName"> DOB : </td> 		                <td>		                    <html:text size="10" property="patientSearchVO.birthTime" styleId="DEM115" maxlength="10" title="Patient's Date Of Birth Equals" onkeyup="DateMask(this,null,event)"/>		                    <html:img src="calendar.gif" onclick="getCalDate('DEM115','DEM115DateIcon'); return false;" styleId="DEM115DateIcon"/>		                </td>                    </tr>                    <tr>                        <td class="fieldName"> Current Sex: </td>                         <td>		                     <html:select name="patientSearchForm" property="patientSearchVO.currentSex" styleId="DEM114" title="Patient's Current Sex Equals" acomplete="false">		                        <html:optionsCollection property="codedValue(SEX)" value="key" label="value"/>		                    </html:select>	                                                                            </td>                    </tr>                    <tr>                        <td class="fieldName"> Patient ID: </td>                         <td> <html:text  property="patientSearchVO.localID" styleId="DEM229" title="Patient's ID Equals"/></td>                    </tr>                    <tr>                        <td colspan="2" style="text-align:center;">                            <br/>                                 <input type="button" value="Search" onclick="searchPatient();"/>&nbsp;                            <input type="button" value="Clear" onclick="clearPatient();"/>                        </td>                    </tr>                </table>        </div>                <div id="patientSearchByEvent" style="display:none;">                <table class="formTable" style="width:90%; margin:auto;">                    <tr>                        <td class="fieldName"> Event ID Type: </td>                         <td>		                     <html:select name="patientSearchForm" property="patientSearchVO.actType" styleId="ESR100" onchange="showHideEventId();" title="Please select the type of Event to search">		                        <html:optionsCollection property="codedValue(PHVS_EVN_SEARCH_ABC)" value="key" label="value"/>		                    </html:select>	                                                                            </td>                    </tr>                    <tr id="ESR101TR" class="none">                                                                            <td class="fieldName"> Event ID: </td>                         <td> <html:text  property="patientSearchVO.actId" styleId="ESR101" title="Please enter 'Event ID' with an exact match"/> </td>                    </tr>	                                                                    <tr>                        <td colspan="2" style="text-align:center;">                            <br/>                                 <input type="button" value="Search" onclick="searchPatient();"/>&nbsp;                            <input type="button" value="Clear" onclick="clearEvent();"/>                        </td>                    </tr>                </table>                    </div>    </p>    </div>     </html:form> 