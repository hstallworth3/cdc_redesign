<%@ include file="/jsp/errors.jsp" %><!-- Start of LocalField.jsp page --><title><%= request.getAttribute("PageTitle") %></title><SCRIPT LANGUAGE="JavaScript">    function cancelForm()    {        var confirmMsg="If you continue with the Cancel action, you will lose any information you have entered. Select OK to continue, or Cancel to not continue.";		if (confirm(confirmMsg)) {			document.forms[0].action ="${localFieldsForm.attributeMap.cancel}";		} else {			return false;		}    }    function submitForm()    {        if(LDFReqFlds()) {            return false;        } else {            document.forms[0].action ="${localFieldsForm.attributeMap.submit}";        }    }    function maxLength2(sTxtBox, maxlimit)    {	        if (sTxtBox.value.length > maxlimit)            sTxtBox.value = sTxtBox.value.substring(0, maxlimit);	    }    function populateSection(tabId)    {        getElementByIdOrByName("sectionId_textbox").value="";        DWRUtil.removeAllOptions("sectionId");        getElementByIdOrByName("subSectionId_textbox").value="";        DWRUtil.removeAllOptions("subSectionId");        		        if(tabId.length > 0)        {            JLocalFieldForm.getLDFSections(tabId, function(data)            {  	                if(data.length > 1) {                    DWRUtil.addOptions("sectionId", data, "key", "value" );                     getElementByIdOrByName("trSection").className='visible';                    getElementByIdOrByName("trSubSection").className='visible';                } else {                    getElementByIdOrByName("trSection").className='none';                    getElementByIdOrByName("trSubSection").className='none';			  	                  }            });	           }    }	    function populateSubSection(sectionId)    {	        getElementByIdOrByName("subSectionId_textbox").value="";        DWRUtil.removeAllOptions("subSectionId");        if(sectionId.length > 0)        {            JLocalFieldForm.getLDFSubSections(sectionId, function(data)            {  				                  DWRUtil.addOptions("subSectionId", data, "key", "value" );             });	           }    }</SCRIPT>      	<html:form action="/LocalFields.do">    <nedss:container id="section2" name="${localFieldsForm.actionMode} LDF" classType="sect"             displayImg ="false" displayLink="false">        <fieldset style="border-width:0px;" id="localField">            <nedss:container id="subsec2" classType="subSect" displayImg ="false">                <!-- Form Entry Errors -->                <tr style="background:#FFF;">                    <td colspan="2">                        <div class="infoBox errors" style="display:none;" id="localFieldDataFormEntryErrors">                        </div>                           <%@ include file="../../../jsp/feedbackMessagesBar.jsp" %>                    </td>                </tr>                    <!-- Type -->                <tr>                    <td class="fieldName"  id="r-typeCd">                        <span class="boldTenRed" > * </span><span title="Indicates the LDF type.">Type:</span>                    </td>                    <td>                        <logic:equal name="localFieldsForm" property="actionMode" value="Create">                            <html:select property="selection.uiMetadata.nbsUiComponentUid" styleId = "typeCd" onchange="changeType(this)">                                <html:optionsCollection property="ldfHtmlTypes" value="key" label="value"/>                            </html:select>			                                        </logic:equal>                        <logic:notEqual name="localFieldsForm" property="actionMode" value="Create">                            <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1010">                                <span>Tab</span>                            </logic:equal>											                            <logic:notEqual name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1010">										<nedss:view name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" methodNm="LdfHtmlTypes" methodParam="${localFieldsForm.formCd}"/>                            </logic:notEqual>                        </logic:notEqual>                    </td>                </tr>                                   <!-- Label -->		                            <tr  id="trLabel">                    <td class="fieldName" id="r-label">                        <span class="boldTenRed" > * </span>                        <span title="The label that will appear on the screen for the LDF, section, subsection or tab.">Label:</span>                    </td>                    <td>                        <logic:notEqual name="localFieldsForm" property="actionMode" value="View">                            <html:textarea  style="WIDTH: 350px; HEIGHT: 70px;"  property="selection.uiMetadata.questionLabel" styleId="label" onkeydown="maxLength2(this, 300)" onkeyup="maxLength2(this, 300)"/>                        </logic:notEqual>                                                <logic:equal name="localFieldsForm" property="actionMode" value="View">                            <nedss:view name="localFieldsForm" property="selection.uiMetadata.questionLabel"/>                        </logic:equal>                    </td>                </tr>                                <!--Tab Name -->                <logic:empty name="localFieldsForm" property="selection.tabId">                    <tr class="none" id="trTab">                </logic:empty>                	                <logic:notEmpty name="localFieldsForm" property="selection.tabId">                    <tr id="trTab">                </logic:notEmpty>		                                    <td class="fieldName" id="r-tabId">                            <span class="boldTenRed" > * </span>                            <span title="The tab that the LDF will appear on.">Tab:</span>                        </td>                        <td>                            <logic:notEqual name="localFieldsForm" property="actionMode" value="View">                                <html:select property="selection.tabId" styleId = "tabId"  onchange="populateSection(this.value);">                                    <html:optionsCollection property="availableTabs" value="key" label="value"/>                                </html:select>                            </logic:notEqual>                            		                                            <logic:equal name="localFieldsForm" property="actionMode" value="View">                                <nedss:view name="localFieldsForm" property="selection.tabName"/>                            </logic:equal>		                                      </td>                    </tr>                                    <!--Section Name -->		                            <logic:empty name="localFieldsForm" property="selection.sectionId">                    <tr class="none" id="trSection">                </logic:empty>	                <logic:notEmpty name="localFieldsForm" property="selection.sectionId">				    <tr  id="trSection">                </logic:notEmpty>                        <td class="fieldName" id="r-sectionId">                            <span class="boldTenRed" > * </span>                            <span title="The section that the LDF will appear on.">Section:</span>                        </td>                                                <td>                            <logic:equal name="localFieldsForm" property="actionMode" value="Create">                                <html:select property="selection.sectionId" styleId = "sectionId" onchange="populateSubSection(this.value)">                                    <html:optionsCollection property="lDFSections(1)" value="key" label="value"/>                                </html:select>                            </logic:equal>                            								                                            <logic:equal name="localFieldsForm" property="actionMode" value="Edit">                                <html:select property="selection.sectionId" styleId = "sectionId" onchange="populateSubSection(this.value)">                                    <html:optionsCollection property="lDFSections(${localFieldsForm.selection.tabId})" value="key" label="value"/>                                </html:select>                            </logic:equal>                                                        <logic:equal name="localFieldsForm" property="actionMode" value="View">                                <nedss:view name="localFieldsForm" property="selection.sectionName"/>                            </logic:equal>                        </td>                    </tr>                                    <!--SubSection Name -->		                            <logic:empty name="localFieldsForm" property="selection.subSectionId">                    <tr class="none" id="trSubSection">                </logic:empty>                <logic:notEmpty name="localFieldsForm" property="selection.subSectionId">                    <tr id="trSubSection">                </logic:notEmpty>			                                            <td class="fieldName" id="r-subSectionId">                            <span class="boldTenRed" > * </span>                            <span title="The subsection that the LDF will appear on.">Subsection:</span>                        </td>                        <td>                            <logic:equal name="localFieldsForm" property="actionMode" value="Create">                                <html:select property="selection.subSectionId" styleId = "subSectionId">                                    <html:optionsCollection property="lDFSubSections(1)" value="key" label="value"/>                                </html:select>                            </logic:equal>                            								                                            <logic:equal name="localFieldsForm" property="actionMode" value="Edit">                                <html:select property="selection.subSectionId" styleId = "subSectionId">                                    <html:optionsCollection property="lDFSubSections(1)" value="key" label="value"/>                                </html:select>                            </logic:equal>                                                        <logic:equal name="localFieldsForm" property="actionMode" value="View">                                <nedss:view name="localFieldsForm" property="selection.subSectionName"/>                            </logic:equal>                        </td>                    </tr>                    		                    <!--Display Order -->		                            <logic:empty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">                    <tr class="none" id="trOrderNbr">                </logic:empty>                                <logic:notEmpty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1010">                        <tr class="none" id="trOrderNbr">                    </logic:equal>                                        <logic:notEqual name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1010">                        <tr id="trOrderNbr">                    </logic:notEqual>                </logic:notEmpty>                            <td class="fieldName" id="r-displayOrder">                                <span class="boldTenRed" > * </span>                                <span title="The order in which the LDF, section, subsection or tab will appear on the screen.">Display Order:</span>                            </td>                            <td>                                <logic:notEqual name="localFieldsForm" property="actionMode" value="View">                                    <html:text property="selection.uiMetadata.orderNbr" size="5" maxlength="5" styleId="orderNbr" onkeydown="isNumeric(this)" onkeyup="isNumeric(this)"/>                                </logic:notEqual>                                                                <logic:equal name="localFieldsForm" property="actionMode" value="View">                                    <nedss:view name="localFieldsForm" property="selection.uiMetadata.orderNbr"/>                                </logic:equal>                                            </td>                        </tr>                                        <!--Required Indicator -->                <logic:empty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">                    <tr class="none" id="trRequiredInd">                </logic:empty>	                <logic:notEmpty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1010">                        <tr class="none" id="trRequiredInd">                    </logic:equal>                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1011">                        <tr class="none" id="trRequiredInd">                    </logic:equal>                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1003">                        <tr class="none" id="trRequiredInd">                    </logic:equal>                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1014">                        <tr class="none" id="trRequiredInd">                    </logic:equal>							                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1007">                        <tr id="trRequiredInd">									                    </logic:equal>                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1008">                        <tr id="trRequiredInd">									                    </logic:equal>                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1009">                        <tr id="trRequiredInd">									                    </logic:equal>                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1013">                        <tr id="trRequiredInd">									                    </logic:equal>                </logic:notEmpty>							                            <td class="fieldName">                                <span title="Indicates if the field is required to be entered before submitting the page.">Required:</span>                            </td>                            <td>                                <logic:notEqual name="localFieldsForm" property="actionMode" value="View">                                    <html:checkbox name="localFieldsForm" property="selection.uiMetadata.requiredInd" value="1"/>                                    <input type="hidden" name="selection.uiMetadata.requiredInd" value="0"/>                                </logic:notEqual>                                <logic:equal name="localFieldsForm" property="actionMode" value="View">                                    <html:checkbox name="localFieldsForm" property="selection.uiMetadata.requiredInd" value="1" disabled="true"/>                                              </logic:equal>                            </td>                        </tr>                                            <!--Datamart Column Name -->		                    <logic:empty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">                    <tr class="none" id="trDMColumn">                </logic:empty>	                <logic:notEmpty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">                    <logic:notPresent name="localFieldsForm" property="attributeMap.showDataMartColNm">                        <tr class="none" id="trDMColumn">                    </logic:notPresent>                    <logic:present name="localFieldsForm" property="attributeMap.showDataMartColNm">                        <tr id="trDMColumn">                    </logic:present>						        	                                </logic:notEmpty>                            <td class="fieldName" id="r-datamartColumnNm">                                <span class="boldTenRed" > * </span><span title="The name that will appear in the data mart for the field.  NOTE: No spaces can be entered for this field and it must be 20 characters or less.">Datamart Column Name:</span>                            </td>                            <td>                                <logic:equal name="localFieldsForm" property="actionMode" value="Create">                                    <html:text property="selection.question.datamartColumnNm" size="30" maxlength="30" styleId="datamartColumnNm" onkeyup="nospaces(this)"/>&nbsp;(Avoid using database keywords)                                </logic:equal>                                <logic:notEqual name="localFieldsForm" property="actionMode" value="Create">                                    <nedss:view name="localFieldsForm" property="selection.question.datamartColumnNm"/>                                </logic:notEqual>                            </td>                        </tr>                        		            		                            <!-- Code set -->		                            <logic:equal name="localFieldsForm" property="selection.question.codeSetGroupId" value="0">                    <tr class="none" id="trCodeset">                </logic:equal>	                <logic:empty name="localFieldsForm" property="selection.question.codeSetGroupId">                    <tr class="none" id="trCodeset">                </logic:empty>                <logic:notEmpty name="localFieldsForm" property="selection.question.codeSetGroupId">                    <logic:notEqual name="localFieldsForm" property="selection.question.codeSetGroupId" value="0">                        <tr id="trCodeset">                    </logic:notEqual>                </logic:notEmpty>                            <td class="fieldName"  id="r-codeset">                                <span class="boldTenRed" > * </span>                                <span title="The code set that is associated with the LDF.">SRT Code Set:</span>                            </td>                            <td>                                <logic:equal name="localFieldsForm" property="actionMode" value="Create">                                    <html:select property="selection.question.codeSetGroupId" styleId = "codeset">                                        <html:optionsCollection property="codesetNames" value="key" label="value"/>                                    </html:select>			                                                </logic:equal>                                                                            <logic:notEqual name="localFieldsForm" property="actionMode" value="Create">                                    <nedss:view name="localFieldsForm" property="selection.question.codeSetGroupId" methodNm="CodesetNames"/>                                </logic:notEqual>                            </td>                        </tr>                                        <!-- Display Width -->                <logic:notEqual name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1008">                    <tr class="none" id="trFieldSize">                </logic:notEqual>									            		                <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1008">                    <tr id="trFieldSize">	            					            				                </logic:equal>								                        <td class="fieldName" id="r-fieldSize">                            <span title="The width of the LDF on the screen.">Display Width:</span>                        </td>                        <td>                            <logic:notEqual name="localFieldsForm" property="actionMode" value="View">                                <html:text property="selection.uiMetadata.fieldSize" styleId="fieldSize" size="2" maxlength="2" onkeyup="isNumeric(this)" onkeydown="isNumeric(this)"/> (2 - 35 Characters)                            </logic:notEqual>                            <logic:equal name="localFieldsForm" property="actionMode" value="View">                                <nedss:view name="localFieldsForm" property="selection.uiMetadata.fieldSize"/>                            </logic:equal>                        </td>                    </tr>                                    <!-- Validation Type -->                <logic:notEqual name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1008">                    <tr class="none" id="trDataType">                </logic:notEqual>									            		                <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1008">                    <tr id="trDataType">	            					            				                </logic:equal>								                        <td class="fieldName"  id="r-dataType">                            <span title="The type of validation that is done for the LDF.">Validation Type:</span>                        </td>                        <td>                            <logic:equal name="localFieldsForm" property="actionMode" value="Create">                                <html:select property="selection.question.dataType" styleId = "dataType" onchange="isAllowFutureDate(this)">                                    <html:option value=""></html:option>                                    <html:option value="Date">Date (mm/dd/yyyy)</html:option>                                    <html:option value="Numeric">Numeric</html:option>                                    <html:option value="Text">Text</html:option>						                                </html:select>			                                            </logic:equal>                                                                                    <logic:notEqual name="localFieldsForm" property="actionMode" value="Create">                                <nedss:view name="localFieldsForm" property="selection.question.dataType"/>                            </logic:notEqual>                        </td>                    </tr>                                    <!--Allow for Future Dates:-->  	            <logic:empty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">                	<tr class="none" id="trFutureDate">			                	<td class="fieldName"  id="r-futureDate">				                	 	<span title="The date can be future date.">Allow for Future Dates:</span>			                	</td>			                	<td>			                		<logic:notEqual name="localFieldsForm" property="actionMode" value="View">			                			<html:checkbox name="localFieldsForm" property="selection.uiMetadata.futureDateInd" value="1" />			                			<input type="hidden" name="selection.uiMetadata.futureDateInd" value="0"/>			                		</logic:notEqual>			                		<logic:equal name="localFieldsForm" property="actionMode" value="View">			                	 		<html:checkbox name="localFieldsForm" property="selection.uiMetadata.futureDateInd" value="1" disabled="true"/>			                	 	</logic:equal>			                	</td>			        </tr>        	                	                </logic:empty>	                <logic:notEmpty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">	                <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1008">		                <logic:equal name="localFieldsForm" property="selection.question.dataType" value="Date">		                	<tr class="visible" id="trFutureDate">			                	<td class="fieldName"  id="r-futureDate">				                	 	<span title="The date can be future date.">Allow for Future Dates:</span>			                	</td>			                	<td>			                		<logic:notEqual name="localFieldsForm" property="actionMode" value="View">			                			<html:checkbox name="localFieldsForm" property="selection.uiMetadata.futureDateInd" value="1" />			                			<input type="hidden" name="selection.uiMetadata.futureDateInd" value="0"/>			                		</logic:notEqual>			                		<logic:equal name="localFieldsForm" property="actionMode" value="View">			                	 		<html:checkbox name="localFieldsForm" property="selection.uiMetadata.futureDateInd" value="1" disabled="true"/>			                	 	</logic:equal>			                	</td>			               	 </tr>		                </logic:equal>	                </logic:equal>                </logic:notEmpty>                               <!--Tooltip -->		                  <logic:empty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">                    <tr class="none" id="trTooltip">                </logic:empty>                	                <logic:notEmpty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1010">                        <tr class="none" id="trTooltip">                    </logic:equal>                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1003">                        <tr class="none" id="trTooltip">                    </logic:equal>                    <logic:notEqual name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1010">                        <logic:notEqual name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1003">                            <tr id="trTooltip">                        </logic:notEqual>                    </logic:notEqual>							          	                						                </logic:notEmpty>                                <td class="fieldName">                                    <span title="The wording that will appear on the sceen when the user hovers over the field label.">Tooltip:</span>                                </td>                                <td>                                    <logic:notEqual name="localFieldsForm" property="actionMode" value="View">                                        <html:textarea style="WIDTH: 350px; HEIGHT: 70px;"  property="selection.uiMetadata.questionToolTip" styleId="toolTip" onkeydown="maxLength2(this, 2000)" onkeyup="maxLength2(this, 2000)"/>                                    </logic:notEqual >                                    <logic:equal name="localFieldsForm" property="actionMode" value="View">                                        <nedss:view name="localFieldsForm" property="selection.uiMetadata.questionToolTip"/>                                    </logic:equal>                                                </td>                            </tr>                                            <!-- Link URL-->                <logic:empty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">                    <tr class="none" id="trLinkurl">                </logic:empty>	                <logic:notEmpty name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid">                    <logic:notEqual name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1003">                        <tr class="none" id="trLinkurl">                    </logic:notEqual>                    <logic:equal name="localFieldsForm" property="selection.uiMetadata.nbsUiComponentUid" value="1003">                        <tr id="trLinkurl">                    </logic:equal>							          	                						                </logic:notEmpty>                            <td class="fieldName" id="r-linkurl">                                <span title="Includes the label for the link that will appear on the screen and the actual link to the desired website.  For example, if the user wanted a link to the CDC website to appear on the page as &quot;Click Here to Access the CDC Website&quot;, they would enter Click Here to Access the CDC Website(http://www.cdc.gov/) for this field.">Link URL:</span>                            </td>                            <td>                                <logic:notEqual name="localFieldsForm" property="actionMode" value="View">                                    <html:textarea style="WIDTH: 350px; HEIGHT: 70px;"  property="selection.linkUrl" styleId="linkUrl" onkeydown="maxLength2(this, 2000)" onkeyup="maxLength2(this, 2000)"/>                                    <div>Example: Click here for CDC News(http://www.cdc.gov/news)</div>                                </logic:notEqual >                                <logic:equal name="localFieldsForm" property="actionMode" value="View">                                    <nedss:view name="localFieldsForm" property="selection.linkUrl"/>                                </logic:equal>                                            </td>                        </tr>                                        <!-- Admin Comments -->		                            <tr  id="trLabel">                    <td class="fieldName" id="r-comments">                        <span title="Any specific notes the LDF administrator would like to make regarding the LDF.">Comments:</span>                    </td>                    <td>                        <logic:notEqual name="localFieldsForm" property="actionMode" value="View">                            <html:textarea  style="WIDTH: 350px; HEIGHT: 70px;"  property="selection.uiMetadata.adminComment" styleId="comment" onkeydown="maxLength2(this, 300)" onkeyup="maxLength2(this, 300)"/>                        </logic:notEqual>                        <logic:equal name="localFieldsForm" property="actionMode" value="View">                            <nedss:view name="localFieldsForm" property="selection.uiMetadata.adminComment"/>                        </logic:equal>                    </td>                </tr>                                <logic:notEqual name="localFieldsForm" property="actionMode" value="View">                     <tr>                        <td  class="InputField" colspan="2" align="right">                            <input type="submit" name="submit" id="submit" value="Submit" onClick="return submitForm();"/>                            <input type="submit" name="submit" id="submit" value="Cancel" onClick="return cancelForm();"/>                                &nbsp;                        </td>                    </tr>                </logic:notEqual>            </nedss:container>         </fieldset>    </nedss:container> 	  	    	</html:form>    	<!-- End of LocalField.jsp page -->